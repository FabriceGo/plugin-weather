<div class="eqLogic-widget eqLogic allowResize" style="width:#width#;height:#height#;#style#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="#version#" data-eqType="#eqType#" data-translate-category="#translate_category#" data-category="#category#" data-tags="#tags#">
  <span class="statusCmd"></span>
  <span class="cmd refresh pull-right cursor" data-cmd_id="#refresh_id#">
    <i class="fas fa-sync"></i>
  </span>
  <span class="cmd cmd-widget" data-cmd_id="#refresh_id#" style="display:none;"></span>
  <center class="widget-name"><a href="#eqLink#">#name_display# <span class="object_name">#object_name#</span></a></center>
  <div class="verticalAlign">
    <div style="position : relative; left : 7px;">
      <span class="pull-left state">
        <br>
        <i class="#icone#" style="font-size: 3em;"></i>
      </span>
      <div class="pull-right" style="margin-right: 20px;margin-top: 0px;">
        <div class="cmd cmd-widget widget-compass" data-type="info" data-subtype="numeric" data-template="compass">
          <div class="content-lg">
            <div class="widget-compass-container">
              <div class="widget-compass-outline"></div>
              <div class="widget-compass-needle-placer">
                <div class="widget-compass-needle"></div>
              </div>
              <div class="state" style="text-align:center"></div>
              <div class="winDir" style="text-align:center"></div>
            </div>
          </div>
        </div>
        <div class="cmd noRefresh" data-type="info" data-subtype="string" data-cmd_id="#sunid#">
          <center><i class="fas fa-sun"></i></center>
          <center><span style="font-size: 0.8em;">#sunrise# | #sunset#</span></center>
        </div>
      </div>
      <span style="margin-left: 5px;font-size: 0.8em;"class="cmd noRefresh" data-type="info" data-subtype="string" data-cmd_id="#conditionid#">#condition#</span><br/>
      <span style="margin-left: 5px;font-size: 0.8em;" class="cmd noRefresh" data-type="info" data-subtype="string" data-cmd_id="#tempid#">#temperature# °C / #humidity# %</span><br/>
      <span style="margin-left: 5px;font-size: 0.8em;" class="cmd noRefresh" data-type="info" data-subtype="string" data-cmd_id="#pressureid#">#windspeed# km/h | #pressure# mb</span>
    </div>
    <div style="margin-top:8px;">
      <center>#forecast#</center>
    </div>
  </div>
  
  <script>
    $('.eqLogic[data-eqLogic_uid=#uid#] .cmd').on('click', function() {
      jeedom.cmd.execute({id: $(this).data('cmd_id')});
    });
    let wind_dir#uid# = (#wind_direction# - 180);
    let directions#uid# = ['Nord', 'Nord-Est', 'Est', 'Sud-Est', 'Sud', 'Sud-Ouest', 'Ouest', 'Nord-Ouest']
    let windDir#uid# = directions#uid#[Math.round(((wind_dir#uid# %= 360) < 0 ? wind_dir#uid# + 360 : wind_dir#uid#) / 45) % 8]
    $('.eqLogic[data-eqLogic_uid=#uid#] .widget-compass .widget-compass-needle-placer').css('transform', 'rotate(' +wind_dir#uid# +'deg)')
    $('.eqLogic[data-eqLogic_uid=#uid#] .widget-compass .state').text(wind_dir#uid#+'°')
    $('.eqLogic[data-eqLogic_uid=#uid#] .widget-compass .winDir').html(windDir#uid#)
  </script>
</div>